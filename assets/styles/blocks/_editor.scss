/**
* Blocks Editor
*
*	- Common
*	- Post Title
*	- Lists
*	- Tables
*	- Code
*	- Separators
*	- Cover Image
*	- Columns
*	- Quotes
*	- Components Panel
*		- Buttons
*		- Separators
*/

/* --------- Still under development --------- */

/* Common */

// Need work.
// Fix full and wide width alignment.
// Treat native spacing (padding and margin).
// Fix mover buttons on wide width alignment (not visible on some breakpoints).

.block-editor-block-list__layout { // Need work
	padding: 0;
}

.wp-block {
	border: none;
	color: color(dark, base);
	font-family: $base-font-serif;
	max-width: none;

	@extend %font-size-m;

	> .block-editor-block-list__block-edit {
		margin-top: 0;
		margin-bottom: 0;
	}

	p {

		&:last-child {
			margin-bottom: 0;
		}
	}

	&[data-align="left"],
	&[data-align="right"] {

		&[data-type="core/cover"] {

			.editor-inner-blocks {

				.block-editor-block-list__block {
					padding: 0;
					margin-bottom: 0;
				}

				.editor-block-list__block-edit {
					margin: 0 auto;
					padding: 0;
				}
			}
		}
	}

	&[data-align="left"] {

		> .block-editor-block-list__block-edit {
			margin-right: space(s);
		}
	}

	&[data-align="right"] {

		> .block-editor-block-list__block-edit {
			margin-left: space(s);
		}
	}

	&[data-align="wide"] {
		margin-left: -(space(m));
		margin-right: -(space(m));

		> .block-editor-block-list__block-edit {

			@include mq($from: phone) {
				margin-left: -44px;
				margin-right: -44px;
			}
		}
	}

	&[data-align="full"] {
		margin-left: auto;
		margin-right: auto;

		> .block-editor-block-list__block-edit {

			@include mq($from: phone) {
				margin-left: -28px;
				margin-right: -28px;
			}
		}
	}

	.is-fullscreen-mode & {

		&[data-align="wide"] {
			margin-left: calc(-100vw / 2 + 100% / 2);
			margin-right: calc(-100vw / 2 + 100% / 2);
			max-width: 100vw;
		}
	}
}

/* Post Title */

.editor-post-title {
	margin-top: -6px; // Keep space for the permalink editor.
	padding: 0;

	@include mq($from: tablet) {
		margin-top: -20px; // Subtract the post title input padding.
	}

	.editor-post-title__block {
		padding-top: 0;
		padding-bottom: 0;

		.editor-post-title__input {
			border-right-width: 1px; // Fix right border.
			color: color(dark, strong);
			font-family: $base-font-sans;
			margin-bottom: space(s);
			padding-left: 14px;
			padding-right: 14px;

			@extend %font-size-xxl;

			@include mq($until: tablet) {
				border-right-width: 1px; // Fix right border.
			}
		}

		.editor-post-permalink {

			@media (max-width: 599px) { // Fix permalink editor position.
				left: 3px;
			}
		}
	}
}

/* Lists */

.block-library-list {

	ol,
	ul {
		margin-left: 0;
		padding-left: 1em;

		&.block-editor-rich-text__editable {
			margin: space(stack, s);
		}
	}

	ol {

		> li {
			list-style-type: decimal;
		}
	}

	ul {

		> li {
			list-style-type: disc;

			> ul {

				> li {
					list-style-type: circle;
				}
			}
		}
	}
}

/* Tables */

.wp-block-table {

	td {
		border-top: none;
	}
}

.wp-block-table__cell-content {
	padding: 0;
}

/* Block Code */

// Need work.

.wp-block-code {
	background-color: color(light, base);
	font-family: $base-font-mono;
	padding: space(xs);

	@extend %font-size-s;

	.editor-plain-text {
		background-color: color(light, base);
		font-family: $base-font-mono;

		@extend %font-size-s;
	}
}

/* Separators */

.wp-block-separator {

	&.is-style-empty {
		margin-bottom: -(space(s));
	}
}

/* Cover Image */

// Need work.
// Fix inner paragraph font sizes.

.wp-block-cover {

	.editor-rich-text {
		color: color(light, base);
	}
}

/* Columns */

// Need work.
// Align with front end.

.wp-block-columns {

	> .block-editor-inner-blocks {

		> .block-editor-block-list__layout {

			> [data-type="core/column"] {

				> .block-editor-block-list__block-edit {

					> div {

						> .block-editor-inner-blocks {

							margin-top: 0;
							margin-bottom: 0;
						}
					}
				}
			}
		}
	}
}

/* Quotes */

// Need work.
// Fix blockquotes left and right margins.
// Refine pull quotes left and right alignment style.

.wp-block-pullquote,
.wp-block-quote {

	.wp-block-pullquote__citation,
	.wp-block-quote__citation {
		color: inherit;
		font-family: $base-font-sans;
		font-weight: 700;
		font-style: normal;
		text-transform: uppercase;

		@extend %font-size-s;
	}
}

.wp-block-pullquote {
	color: color(dark, base);

	blockquote {

		> .block-editor-rich-text {

			p {
				margin: space(stack, xs);

				@extend %font-size-l;
			}
		}
	}
}

.wp-block[data-type="core/pullquote"] {

	&[data-align="left"] {
		margin-right: 2rem;

		.wp-block-pullquote {

			@include mq($from: tablet) {
				margin-left: -150px;
			}

			p,
			.wp-block-pullquote__citation {
				text-align: left;
			}
		}
	}

	&[data-align="right"] {

		.wp-block-pullquote {
			margin-left: 2rem;

			@include mq($from: tablet) {
				margin-right: -150px;
			}

			p,
			.wp-block-pullquote__citation {
				text-align: right;
			}
		}
	}

	&[data-align="left"],
	&[data-align="right"] {

		.wp-block-pullquote {
			border: none;
			max-width: 100%;
			padding: 0;

			@include mq($from: phone) {
				max-width: 200px;
			}

			@include mq($from: tablet) {
				max-width: 350px;
			}

			blockquote {
				margin: 0;

				p {

					@extend %font-size-l;
				}
			}
		}
	}
}

.wp-block-quote {
	border-left: 0;
	padding-left: 0;

	&[style*="text-align: right"] {
		border-right: 0;
		padding-right: 0;
	}
}

/* Components Panel */

&.editor-block-preview__content {

	/* Buttons */
	.wp-block-button {
		left: 50%;
		top: 50%;
		position: absolute;
		transform: translate(-50%, -50%);
	}

	/* Separators */
	.wp-block-separator {
		margin-left: auto;
		margin-right: auto;

		&.is-style-dots,
		&.is-style-empty {
			margin-bottom: 0;
			margin-top: 0;
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
		}

		&.is-style-dots {

			&::before {
				letter-spacing: 0.8em;
				padding-left: 0.8em;
			}
		}
	}
}
